<!-- nutrition-tracking.component.html -->
<div class="container mx-auto p-4">
    <div class="bg-gray-100 p-6 rounded-md shadow-md max-w-3xl mx-auto">
      <h1 class="text-2xl font-bold text-gray-900 mb-4">Nutrition Tracking</h1>
      
      <!-- Search Section -->
      <div class="mb-6">
        <input
          type="text"
          [(ngModel)]="searchTerm"
          (keyup)="searchFood()"
          placeholder="Search for food"
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500"
        />
      </div>
  
      <!-- Progress Bars -->
      <div class="space-y-4 mb-6">
        <div>
          <div class="flex justify-between text-sm text-gray-700 mb-1">
            <span>Calories</span>
            <span>{{ getCurrentTotal('calories') }}/{{ dailyGoals.calories }}</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2.5">
            <div
              class="bg-green-500 h-2.5 rounded-full transition-all duration-300"
              [style.width]="getProgressPercentage('calories') + '%'"
            ></div>
          </div>
        </div>
  
        <div>
          <div class="flex justify-between text-sm text-gray-700 mb-1">
            <span>Protein</span>
            <span>{{ getCurrentTotal('protein') }}g/{{ dailyGoals.protein }}g</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2.5">
            <div
              class="bg-blue-500 h-2.5 rounded-full transition-all duration-300"
              [style.width]="getProgressPercentage('protein') + '%'"
            ></div>
          </div>
        </div>
  
        <div>
          <div class="flex justify-between text-sm text-gray-700 mb-1">
            <span>Carbs</span>
            <span>{{ getCurrentTotal('carbs') }}g/{{ dailyGoals.carbs }}g</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2.5">
            <div
              class="bg-orange-500 h-2.5 rounded-full transition-all duration-300"
              [style.width]="getProgressPercentage('carbs') + '%'"
            ></div>
          </div>
        </div>
  
        <div>
          <div class="flex justify-between text-sm text-gray-700 mb-1">
            <span>Fat</span>
            <span>{{ getCurrentTotal('fat') }}g/{{ dailyGoals.fat }}g</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2.5">
            <div
              class="bg-purple-500 h-2.5 rounded-full transition-all duration-300"
              [style.width]="getProgressPercentage('fat') + '%'"
            ></div>
          </div>
        </div>
      </div>
  
      <!-- Food List -->
      <div class="space-y-2">
        <h2 class="font-medium text-gray-900 mb-2">Tracked Foods</h2>
        <div *ngFor="let item of trackedFoods" class="bg-white p-3 rounded-md shadow-sm">
          <div class="flex justify-between items-center">
            <div class="flex-grow">
              <h3 class="font-medium text-gray-900">{{ item.name }}</h3>
              <p class="text-sm text-gray-600">
                {{ item.actualCalories }} cal • 
                P: {{ item.actualProtein }}g • C: {{ item.actualCarbs }}g • F: {{ item.actualFat }}g
              </p>
            </div>
            <div class="flex items-center gap-3">
              <div class="flex items-center gap-2">
                <input
                  type="number"
                  [(ngModel)]="item.amount"
                  (change)="updateAmount(item, item.amount)"
                  class="w-20 border border-gray-300 rounded px-2 py-1 text-sm"
                  min="0"
                />
                <span class="text-sm text-gray-600">g</span>
              </div>
              <button
                (click)="removeFood(item)"
                class="text-red-500 hover:text-red-700"
              >
                Remove
              </button>
            </div>
          </div>
        </div>
      </div>
  
      <!-- Search Results -->
      <div *ngIf="searchResults.length > 0" class="mt-4 space-y-2">
        <h2 class="font-medium text-gray-900">Search Results</h2>
        <div *ngFor="let item of searchResults" class="bg-white p-3 rounded-md shadow-sm">
          <div class="flex justify-between items-center">
            <div>
              <h3 class="font-medium text-gray-900">{{ item.name }}</h3>
              <p class="text-sm text-gray-600">
                {{ item.calories }} cal per 100g
              </p>
            </div>
            <div class="flex items-center gap-3">
              <div class="flex items-center gap-2">
                <input
                  type="number"
                  [(ngModel)]="tempAmount"
                  class="w-20 border border-gray-300 rounded px-2 py-1 text-sm"
                  min="0"
                />
                <span class="text-sm text-gray-600">g</span>
              </div>
              <button
                (click)="addFood(item)"
                class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded"
              >
                Add
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>